{"ast":null,"code":"var _jsxFileName = \"D:\\\\RUT\\\\packages\\\\admin\\\\src\\\\context\\\\CategoryContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { storage } from '../utils/storage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CategoryContext = /*#__PURE__*/createContext(undefined);\nexport const CategoryProvider = ({\n  children\n}) => {\n  _s();\n  const [mainCategories, setMainCategories] = useState([]);\n  const [subCategories, setSubCategories] = useState([]);\n  useEffect(() => {\n    const savedMain = storage.getMainCategories();\n    const savedSub = storage.getSubCategories();\n    if (savedMain.length > 0) setMainCategories(savedMain);\n    if (savedSub.length > 0) setSubCategories(savedSub);\n  }, []);\n  const saveMainToStorage = newCategories => {\n    setMainCategories(newCategories);\n    storage.saveMainCategories(newCategories);\n  };\n  const saveSubToStorage = newCategories => {\n    setSubCategories(newCategories);\n    storage.saveSubCategories(newCategories);\n  };\n  const addMainCategory = name => {\n    const newCategory = {\n      id: `main_cat_${Date.now()}`,\n      name,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n    saveMainToStorage([...mainCategories, newCategory]);\n  };\n  const addSubCategory = (name, mainCategoryId) => {\n    const newCategory = {\n      id: `sub_cat_${Date.now()}`,\n      name,\n      mainCategoryId,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n    saveSubToStorage([...subCategories, newCategory]);\n  };\n  const updateMainCategory = (id, name) => {\n    const newCategories = mainCategories.map(cat => cat.id === id ? {\n      ...cat,\n      name,\n      updatedAt: new Date().toISOString()\n    } : cat);\n    saveMainToStorage(newCategories);\n  };\n  const updateSubCategory = (id, name) => {\n    const newCategories = subCategories.map(cat => cat.id === id ? {\n      ...cat,\n      name,\n      updatedAt: new Date().toISOString()\n    } : cat);\n    saveSubToStorage(newCategories);\n  };\n  const deleteMainCategory = id => {\n    // 소분류가 있으면 삭제 불가\n    const hasSubCategories = subCategories.some(sub => sub.mainCategoryId === id);\n    if (hasSubCategories) {\n      return false;\n    }\n    const newCategories = mainCategories.filter(cat => cat.id !== id);\n    saveMainToStorage(newCategories);\n    return true;\n  };\n  const deleteSubCategory = id => {\n    const newCategories = subCategories.filter(cat => cat.id !== id);\n    saveSubToStorage(newCategories);\n  };\n  const getMainCategory = id => {\n    return mainCategories.find(cat => cat.id === id);\n  };\n  const getSubCategoriesByMain = mainCategoryId => {\n    return subCategories.filter(sub => sub.mainCategoryId === mainCategoryId);\n  };\n  return /*#__PURE__*/_jsxDEV(CategoryContext.Provider, {\n    value: {\n      mainCategories,\n      subCategories,\n      addMainCategory,\n      addSubCategory,\n      updateMainCategory,\n      updateSubCategory,\n      deleteMainCategory,\n      deleteSubCategory,\n      getMainCategory,\n      getSubCategoriesByMain\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n_s(CategoryProvider, \"qVdfZ5Xumop9VwggiEWc3wnutUM=\");\n_c = CategoryProvider;\nexport const useCategories = () => {\n  _s2();\n  const context = useContext(CategoryContext);\n  if (context === undefined) {\n    throw new Error('useCategories must be used within a CategoryProvider');\n  }\n  return context;\n};\n_s2(useCategories, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"CategoryProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","storage","jsxDEV","_jsxDEV","CategoryContext","undefined","CategoryProvider","children","_s","mainCategories","setMainCategories","subCategories","setSubCategories","savedMain","getMainCategories","savedSub","getSubCategories","length","saveMainToStorage","newCategories","saveMainCategories","saveSubToStorage","saveSubCategories","addMainCategory","name","newCategory","id","Date","now","createdAt","toISOString","updatedAt","addSubCategory","mainCategoryId","updateMainCategory","map","cat","updateSubCategory","deleteMainCategory","hasSubCategories","some","sub","filter","deleteSubCategory","getMainCategory","find","getSubCategoriesByMain","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCategories","_s2","context","Error","$RefreshReg$"],"sources":["D:/RUT/packages/admin/src/context/CategoryContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { MainCategory, SubCategory } from '@tourstream/shared';\r\nimport { storage } from '../utils/storage';\r\n\r\ninterface CategoryContextType {\r\n  mainCategories: MainCategory[];\r\n  subCategories: SubCategory[];\r\n  addMainCategory: (name: string) => void;\r\n  addSubCategory: (name: string, mainCategoryId: string) => void;\r\n  updateMainCategory: (id: string, name: string) => void;\r\n  updateSubCategory: (id: string, name: string) => void;\r\n  deleteMainCategory: (id: string) => boolean; // 삭제 가능 여부 반환\r\n  deleteSubCategory: (id: string) => void;\r\n  getMainCategory: (id: string) => MainCategory | undefined;\r\n  getSubCategoriesByMain: (mainCategoryId: string) => SubCategory[];\r\n}\r\n\r\nconst CategoryContext = createContext<CategoryContextType | undefined>(undefined);\r\n\r\nexport const CategoryProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [mainCategories, setMainCategories] = useState<MainCategory[]>([]);\r\n  const [subCategories, setSubCategories] = useState<SubCategory[]>([]);\r\n\r\n  useEffect(() => {\r\n    const savedMain = storage.getMainCategories();\r\n    const savedSub = storage.getSubCategories();\r\n    if (savedMain.length > 0) setMainCategories(savedMain);\r\n    if (savedSub.length > 0) setSubCategories(savedSub);\r\n  }, []);\r\n\r\n  const saveMainToStorage = (newCategories: MainCategory[]) => {\r\n    setMainCategories(newCategories);\r\n    storage.saveMainCategories(newCategories);\r\n  };\r\n\r\n  const saveSubToStorage = (newCategories: SubCategory[]) => {\r\n    setSubCategories(newCategories);\r\n    storage.saveSubCategories(newCategories);\r\n  };\r\n\r\n  const addMainCategory = (name: string) => {\r\n    const newCategory: MainCategory = {\r\n      id: `main_cat_${Date.now()}`,\r\n      name,\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n    };\r\n    saveMainToStorage([...mainCategories, newCategory]);\r\n  };\r\n\r\n  const addSubCategory = (name: string, mainCategoryId: string) => {\r\n    const newCategory: SubCategory = {\r\n      id: `sub_cat_${Date.now()}`,\r\n      name,\r\n      mainCategoryId,\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n    };\r\n    saveSubToStorage([...subCategories, newCategory]);\r\n  };\r\n\r\n  const updateMainCategory = (id: string, name: string) => {\r\n    const newCategories = mainCategories.map(cat =>\r\n      cat.id === id ? { ...cat, name, updatedAt: new Date().toISOString() } : cat\r\n    );\r\n    saveMainToStorage(newCategories);\r\n  };\r\n\r\n  const updateSubCategory = (id: string, name: string) => {\r\n    const newCategories = subCategories.map(cat =>\r\n      cat.id === id ? { ...cat, name, updatedAt: new Date().toISOString() } : cat\r\n    );\r\n    saveSubToStorage(newCategories);\r\n  };\r\n\r\n  const deleteMainCategory = (id: string): boolean => {\r\n    // 소분류가 있으면 삭제 불가\r\n    const hasSubCategories = subCategories.some(sub => sub.mainCategoryId === id);\r\n    if (hasSubCategories) {\r\n      return false;\r\n    }\r\n    const newCategories = mainCategories.filter(cat => cat.id !== id);\r\n    saveMainToStorage(newCategories);\r\n    return true;\r\n  };\r\n\r\n  const deleteSubCategory = (id: string) => {\r\n    const newCategories = subCategories.filter(cat => cat.id !== id);\r\n    saveSubToStorage(newCategories);\r\n  };\r\n\r\n  const getMainCategory = (id: string) => {\r\n    return mainCategories.find(cat => cat.id === id);\r\n  };\r\n\r\n  const getSubCategoriesByMain = (mainCategoryId: string) => {\r\n    return subCategories.filter(sub => sub.mainCategoryId === mainCategoryId);\r\n  };\r\n\r\n  return (\r\n    <CategoryContext.Provider value={{\r\n      mainCategories,\r\n      subCategories,\r\n      addMainCategory,\r\n      addSubCategory,\r\n      updateMainCategory,\r\n      updateSubCategory,\r\n      deleteMainCategory,\r\n      deleteSubCategory,\r\n      getMainCategory,\r\n      getSubCategoriesByMain,\r\n    }}>\r\n      {children}\r\n    </CategoryContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCategories = () => {\r\n  const context = useContext(CategoryContext);\r\n  if (context === undefined) {\r\n    throw new Error('useCategories must be used within a CategoryProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}